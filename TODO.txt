-- factor out string-splitters and coloring logic